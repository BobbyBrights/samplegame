<span ng-repeat="img in images track by $index">
  <a ng-if="img.state" ui-sref="{{img.state ? img.state + '(' + (img.params || '{}') + ')' : '.'}}">
    <img class="{{img.cls}} image-{{$index}}"

         ng-src="{{img.path}}" data-image-index="{{$index}}"
         ng-style="img.styles" height="{{img.height}}" width="{{img.width}}">
  </a>

  <img ng-if="!img.state" class="{{img.cls}} image-{{$index}}"

       ng-src="{{img.path}}"  data-image-index="{{$index}}"
       ng-style="img.styles" height="{{img.height}}" width="{{img.width}}">
</span>